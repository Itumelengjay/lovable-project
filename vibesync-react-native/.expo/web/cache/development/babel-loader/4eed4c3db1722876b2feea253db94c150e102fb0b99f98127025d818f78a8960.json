{"ast":null,"code":"import { Platform } from 'expo-modules-core';\nexport default {\n  async getDocumentAsync({\n    type = '*/*',\n    multiple = false,\n    base64 = true\n  }) {\n    if (!Platform.isDOMAvailable) {\n      return {\n        canceled: true,\n        assets: null\n      };\n    }\n    const input = document.createElement('input');\n    input.style.display = 'none';\n    input.setAttribute('type', 'file');\n    input.setAttribute('accept', Array.isArray(type) ? type.join(',') : type);\n    input.setAttribute('id', String(Math.random()));\n    if (multiple) {\n      input.setAttribute('multiple', 'multiple');\n    }\n    document.body.appendChild(input);\n    return new Promise((resolve, reject) => {\n      input.addEventListener('change', async () => {\n        if (input.files) {\n          const results = [];\n          for (let i = 0; i < input.files.length; i++) {\n            results.push(readFileAsync(input.files[i], base64));\n          }\n          try {\n            const assets = await Promise.all(results);\n            resolve({\n              canceled: false,\n              assets,\n              output: input.files\n            });\n          } catch (e) {\n            reject(e);\n          }\n        } else {\n          resolve({\n            canceled: true,\n            assets: null\n          });\n        }\n        document.body.removeChild(input);\n      });\n      input.addEventListener('cancel', () => {\n        resolve({\n          canceled: true,\n          assets: null\n        });\n      });\n      const event = new MouseEvent('click');\n      input.dispatchEvent(event);\n    });\n  }\n};\nfunction readFileAsync(targetFile, base64 = true) {\n  return new Promise((resolve, reject) => {\n    const mimeType = targetFile.type;\n    if (!base64) {\n      resolve({\n        uri: targetFile.webkitRelativePath,\n        mimeType,\n        name: targetFile.name,\n        lastModified: targetFile.lastModified,\n        size: targetFile.size,\n        file: targetFile\n      });\n      return;\n    }\n    const reader = new FileReader();\n    reader.onerror = () => {\n      reject(new Error(`Failed to read the selected media because the operation failed.`));\n    };\n    reader.onload = ({\n      target\n    }) => {\n      const uri = target.result;\n      resolve({\n        uri,\n        mimeType,\n        name: targetFile.name,\n        lastModified: targetFile.lastModified,\n        size: targetFile.size,\n        file: targetFile\n      });\n    };\n    reader.readAsDataURL(targetFile);\n  });\n}","map":{"version":3,"names":["Platform","getDocumentAsync","type","multiple","base64","isDOMAvailable","canceled","assets","input","document","createElement","style","display","setAttribute","Array","isArray","join","String","Math","random","body","appendChild","Promise","resolve","reject","addEventListener","files","results","i","length","push","readFileAsync","all","output","e","removeChild","event","MouseEvent","dispatchEvent","targetFile","mimeType","uri","webkitRelativePath","name","lastModified","size","file","reader","FileReader","onerror","Error","onload","target","result","readAsDataURL"],"sources":["/project/sandbox/user-workspace/vibesync-react-native/node_modules/expo-document-picker/src/ExpoDocumentPicker.web.ts"],"sourcesContent":["import { Platform } from 'expo-modules-core';\n\nimport { DocumentPickerAsset, DocumentPickerOptions, DocumentPickerResult } from './types';\n\nexport default {\n  async getDocumentAsync({\n    type = '*/*',\n    multiple = false,\n    base64 = true,\n  }: DocumentPickerOptions): Promise<DocumentPickerResult> {\n    // SSR guard\n    if (!Platform.isDOMAvailable) {\n      return { canceled: true, assets: null };\n    }\n\n    const input = document.createElement('input');\n    input.style.display = 'none';\n    input.setAttribute('type', 'file');\n    input.setAttribute('accept', Array.isArray(type) ? type.join(',') : type);\n    input.setAttribute('id', String(Math.random()));\n    if (multiple) {\n      input.setAttribute('multiple', 'multiple');\n    }\n\n    document.body.appendChild(input);\n\n    return new Promise((resolve, reject) => {\n      input.addEventListener('change', async () => {\n        if (input.files) {\n          const results: Promise<DocumentPickerAsset>[] = [];\n          for (let i = 0; i < input.files.length; i++) {\n            results.push(readFileAsync(input.files[i], base64));\n          }\n          try {\n            const assets = await Promise.all(results);\n            resolve({ canceled: false, assets, output: input.files });\n          } catch (e) {\n            reject(e);\n          }\n        } else {\n          resolve({ canceled: true, assets: null });\n        }\n\n        document.body.removeChild(input);\n      });\n\n      input.addEventListener('cancel', () => {\n        resolve({ canceled: true, assets: null });\n      });\n\n      const event = new MouseEvent('click');\n      input.dispatchEvent(event);\n    });\n  },\n};\n\nfunction readFileAsync(targetFile: File, base64: boolean = true): Promise<DocumentPickerAsset> {\n  return new Promise((resolve, reject) => {\n    const mimeType = targetFile.type;\n    if (!base64) {\n      resolve({\n        uri: targetFile.webkitRelativePath,\n        mimeType,\n        name: targetFile.name,\n        lastModified: targetFile.lastModified,\n        size: targetFile.size,\n        file: targetFile,\n      });\n      return;\n    }\n    const reader = new FileReader();\n    reader.onerror = () => {\n      reject(new Error(`Failed to read the selected media because the operation failed.`));\n    };\n    reader.onload = ({ target }) => {\n      const uri = (target as any).result;\n      resolve({\n        uri,\n        mimeType,\n        name: targetFile.name,\n        lastModified: targetFile.lastModified,\n        size: targetFile.size,\n        file: targetFile,\n      });\n    };\n\n    // Read in the image file as a binary string.\n    reader.readAsDataURL(targetFile);\n  });\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}